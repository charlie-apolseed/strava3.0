<header class="p-2">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a routerLink="/"
                class="logo-container d-flex align-items-center justify-content-center text-decoration-none"
                style="height: 25px;">
                <img class="bi me-2" width="32" height="32" role="img" src="icons/mountain-icon-50.png" alt="Logo">
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto ms-1 mb-2 justify-content-center mb-md-0">
                <li><a routerLink="#" class="nav-link px-2 me-3"
                        style="color: rgb(255, 0, 255); font-weight: 600;">Strava
                        Visualizer</a></li>
                <li><a routerLink="../activities" class="nav-link px-2 text-black">Activities</a></li>
                <li><a routerLink="#" class="nav-link px-2 text-black">Map</a></li>
                <li><a routerLink="#" class="nav-link px-2 text-black">Training Log</a></li>
                <li><a routerLink="progress" class="nav-link px-2 text-secondary">Progress</a></li>
            </ul>

            <div class="text-end">
                <button type="button" class="btn btn-dark">Home</button>
            </div>
        </div>
    </div>
    <hr class="mb-0">
</header>
<li *ngFor="let goal of activeGoals; let i = index">
    <div class="goal-title">{{goal.title}}</div>
    <div></div>
    <div class="progress">
        <div class="progress-bar" role="progressbar" [style.width.%]="getProgress(i)"
            [attr.aria-valuenow]="getProgress(i)" aria-valuemin="0" aria-valuemax="100">
            {{getProgress(i)}}%
        </div>
    </div>
</li>

<button class="btn btn-dark d-flex align-items-center justify-content-between px-3 me-2 filter-button"
    data-bs-toggle="modal" data-bs-target="#newGoalModal" (click)="resetNewGoalFields()">
    <img src="icons/filter-icon.png" alt="Filter Icon" class="filter-icon me-2">
    Filter
</button>
<button (click)="getAllGoals()">Get all goals</button>
<button (click)="getActiveGoals()">Get active goals</button>


<div class="modal fade" id="newGoalModal" tabindex="-1" aria-labelledby="newGoalModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header d-flex justify-content-between">
                <h1 class="modal-title fs-5" id="exampleModalLabel">New Goal</h1>
                <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close">X</button>
            </div>

            <div class="modal-body">
                <div class="d-flex new-goal-section newGoal-title">
                    <input type="text" placeholder="Goal Title" id="goal-title-input" class="newGoal-title-input"
                        autocomplete="off">
                </div>
                <hr>
                <div class="d-flex justify-content-between new-goal-section metric-and-date">
                    <div class="newGoal-metric">
                        <button type="button" class="btn btn-dark dropdown-toggle p-2" id="sortMenuButton"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            {{newGoalMetricLabel}}
                        </button>
                        <div class="dropdown-menu" aria-labelledby="metricButton">
                            <a class="dropdown-item" [ngClass]="{'active-metric': newGoalMetric === 'Elevation'}"
                                (click)="setNewGoalMetric('Elevation')">Date</a>
                            <a class="dropdown-item" [ngClass]="{'active-metric': newGoalMetric === 'Distance'}"
                                (click)="setNewGoalMetric('Distance')">Distance</a>
                        </div>
                    </div>
                    <div class="newGoal-date">
                        <button type="button" class="btn btn-dark dropdown-toggle p-2" id="sortMenuButton"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            {{newGoalDateLabel}}
                        </button>
                        <div class="dropdown-menu" aria-labelledby="metricButton">
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '1 Week'}"
                                (click)="setNewGoalDate('1 Week')">1 Week</a>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '2 Week'}"
                                (click)="setNewGoalDate('2 Weeks')">2 Week</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '1 Month'}"
                                (click)="setNewGoalDate('1 Month')">1 Month</a>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '3 Month'}"
                                (click)="setNewGoalDate('3 Months')">3 Month</a>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '6 Month'}"
                                (click)="setNewGoalDate('6 Months')">6 Month</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === '1 Year'}"
                                (click)="setNewGoalDate('1 Year')">1 Year</a>
                            <a class="dropdown-item" [ngClass]="{'active-date': newGoalDate === 'All Time'}"
                                (click)="setNewGoalDate('All Time')">All Time</a>
                        </div>
                    </div>
                </div>
                <hr>

                <div class="modal-footer">
                    <button #closeBtn type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary save-changes-button" (click)="saveNewGoal()">Save
                        changes</button>
                </div>
            </div>
        </div>
    </div>